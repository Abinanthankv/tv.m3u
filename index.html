<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Data from JSON</title>
    <link rel="stylesheet" href="style.css" />
    <link href="https://vjs.zencdn.net/8.12.0/video-js.css" rel="stylesheet" />
    <script src="https://vjs.zencdn.net/8.12.0/video.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@1"></script>
  </head>
  <body>
    <ul id="channel-list" class="logo-list"></ul>
    <video id="my-video" class="video-js" ></video>
    <script>
      var videoSrc ="https://fifaxbd.fun/JIOxRANAPK/stream.m3u8?id=896&e=.m3u8";
      const channelList = document.getElementById("channel-list");
      const myVideo = document.getElementById("my-video");
      const videoPlayer = videojs('my-video'); 

      // Replace 'your_data.json' with the actual path to your JSON file
      fetch("./channel.json")
        .then((response) => response.json())
        .then((data) => {
          for (const item of data) {
            const logoImg = document.createElement("img");
            const listItem = document.createElement("li");
            logoImg.src = item.logo;
            listItem.textContent = item.name;
            listItem.insertAdjacentHTML(
              "beforeend",
              `<img src="${item.logo}">`
            );
            listItem.addEventListener("click", () => {
               videoSrc = `https://fifaxbd.fun/JIOxRANAPK/stream.m3u8?id=${item.id}&e=.m3u8`;
               console.log(videoSrc);
              if (Hls.isSupported()) {
                var hls = new Hls();
                hls.loadSource(videoSrc);
                hls.attachMedia(myVideo);
            
              } else if (videoPlayer.canPlayType("application/vnd.apple.mpegurl")) {
                videoPlayer.src = videoSrc;
                videoPlayer.load();
                videoPlayer.play()
              }
            });
            channelList.appendChild(listItem);
          }
        });
    </script>
  </body>
</html>
